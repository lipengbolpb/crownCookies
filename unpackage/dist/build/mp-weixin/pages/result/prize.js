(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/result/prize"],{1109:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=r(i("4795")),o=i("51c7"),n=r(i("aeed"));function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e,i,s,o,n,r){try{var a=t[n](r),c=a.value}catch(h){return void i(h)}a.done?e(c):Promise.resolve(c).then(s,o)}function c(t){return function(){var e=this,i=arguments;return new Promise((function(s,o){var n=t.apply(e,i);function r(t){a(n,s,o,r,c,"next",t)}function c(t){a(n,s,o,r,c,"throw",t)}r(void 0)}))}}var h=function(){i.e("components/uni-pop").then(function(){return resolve(i("590f"))}.bind(null,i)).catch(i.oe)},l={components:{uniPopup:h},data:function(){return{bizcode:"",result:"",reply:"",imgUrl:o.config.staticUrl,telToast:!1,showForm:!1,showtjOK:!1,provinceData:n.default,cityData:[],areaData:[],selectList:[{txt:"请选择"},{txt:"请选择"},{txt:"请选择"}],region:"",tabOne:"请选择",indexTab:0,proviceShow:!0,areaShow:!1,cityShow:!1,show:!1,type:"",checkOne:null,checkTwo:null,checkThree:null,yzmRes:"",sec:0,yzval:"",regMobile:/^1[345678]\d{9}$/,regYzcode:/^[0-9]{4}$/,getted:!1,getCard:!1,animationData:{},off:!1,cardImg:""}},onLoad:function(t){var e=this;console.log(t),this.bizcode=t.bizcode,console.log(this.result),console.log(this.reply),console.log("openid"+this.$store.state.openid),this.result=this.$store.state.sweepData.result,this.reply=this.$store.state.sweepData.reply,console.log(this.result),console.log(this.reply),11==this.bizcode?this.getCard=!1:this.reply.cardNo&&(this.getCard=!0,this.off=!0,this.off?setTimeout((function(){e.rotateAndScale()}),200):this.norotateAndScale(),this.off=!this.off,"A"==this.reply.cardNo?this.cardImg=this.imgUrl+"hongGet.png":"B"==this.reply.cardNo?this.cardImg=this.imgUrl+"fuGet.png":"C"==this.reply.cardNo?this.cardImg=this.imgUrl+"luGet.png":"D"==this.reply.cardNo?this.cardImg=this.imgUrl+"shouGet.png":"E"==this.reply.cardNo&&(this.cardImg=this.imgUrl+"xiGet.png")),"true"==t.isWrite&&(this.getted=!0)},onUnload:function(){},onShow:function(){var e=t.createAnimation({duration:1e3,timingFunction:"ease"});this.animation=e,console.log(this.animation)},onShareAppMessage:function(t){return"button"===t.from&&console.log(t.target),{title:"青岛啤酒",path:"/pages/home/home",imageUrl:this.imgUrl+"share.png"}},methods:{confirm:function(){this.getCard=!1},rotateAndScale:function(){this.animation.translateY(60).rotate(360).scale(3.2).step(),this.animationData=this.animation.export()},toHome:function(){t.switchTab({url:"../home/home"})},callPhone:function(e){console.log(e),t.makePhoneCall({phoneNumber:String(e),success:function(){console.log("拨打电话成功！")},fail:function(){console.log("拨打电话失败！")}})},toRule:function(){"2018"==this.reply.skuYear?t.navigateTo({url:"../rule/rule?skuKey=2018"}):"2019"==this.reply.skuYear?t.navigateTo({url:"../rule/rule?skuKey=2019"}):"2020"==this.reply.skuYear&&t.navigateTo({url:"../rule/rule?skuKey=2020"})},showTel:function(){this.telToast=!0},closeTel:function(){this.telToast=!1},getPrize:function(){this.showForm=!0},formValue:function(){if(console.log(this.userName),""==this.userName||void 0==this.userName)return t.showModal({title:"提示",content:"请填写正确的姓名哦！~"}),!1;if((0,o.idcardValidate)(this.idcard))if(this.regMobile.test(this.mobile))if(""!=this.address&&void 0!=this.address){if(!this.regYzcode.test(this.yzval))return t.showModal({title:"温馨提示",content:"请填写正确的验证码哦！~"}),!1;for(var e in this.selectList)if("请选择"==this.selectList[e].txt)return t.showModal({title:"提示",content:"你还没有选择完整的所在地区信息哦~"}),!1;this.sub_message()}else t.showModal({title:"提示",content:"请填写正确的详细地址哦！~"});else t.showModal({title:"提示",content:"请填写正确的手机号！~"});else t.showModal({title:"提示",content:"请填写正确的身份证号哦！~"})},sub_message:function(){var e=this;return c(s.default.mark((function i(){var n,r;return s.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e.reply&&""!=e.reply.prizeVcode&&"undefined"!=e.reply.prizeVcode){i.next=3;break}return t.showModal({title:"提示",content:"信息缺失，无法提交信息！"}),i.abrupt("return");case 3:return t.showLoading({title:"提交中..."}),n={openid:e.$store.state.openid,username:e.userName,address:e.region+e.address.trim(),idcard:e.idcard,phonenum:e.mobile,prizeVcode:e.reply.prizeVcode,captcha:e.yzval,projectServerName:"liaoning"},i.next=7,(0,o.post)("/user/savePrize",n);case 7:e.tjResult=i.sent,console.log(e.tjResult),t.hideLoading(),r=e.tjResult,0==r.result.businessCode?(e.showtjOK=!0,setTimeout((function(){e.showForm=!1,e.getted=!0}),2e3),e.clearForm()):t.showModal({title:"温馨提示",content:r.result.msg});case 12:case"end":return i.stop()}}),i)})))()},clearForm:function(){this.userName="",this.idcard="",this.mobile="",this.region="",this.address="",this.yzval="",this.seeInfo=!1},iknow:function(){this.showForm=!1,this.showtjOK=!1},getCaptcha:function(){var e=this;return c(s.default.mark((function i(){var n,r;return s.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.showLoading({title:"获取中..."}),n={phonenum:e.mobile,projectServerName:"liaoning"},i.next=4,(0,o.post)("/user/getCaptcha",n);case 4:e.yzmRes=i.sent,console.log("getCaptcha"+e.yzmRes),t.hideLoading(),r=e.yzmRes,0==r.result.businessCode?(e.sec=60,e.timer()):t.showModal({title:"提示",content:r.result.msg});case 9:case"end":return i.stop()}}),i)})))()},getyz:function(){if(this.sec>0)return!1;/^1[34578]\d{9}$/.test(this.mobile)?(this.getCaptcha(),this.sec=0):t.showModal({title:"提示",content:"请填写正确的手机号！~"})},timer:function(){var t=this;if(this.stop||this.sec<=0)return this.sec=0,!1;this.sec=this.sec-1,setTimeout((function(){t.timer()}),1e3)},togglePopup:function(t,e){1!=this.isDisabled&&(this.type=t,"tip"===e?this.show=!0:this.$refs[e].open())},cancel:function(e){if("tip"!==e)for(var i in this.$refs[e].close(),console.log(this.selectList),this.selectList)return console.log("aaa"),"请选择"==this.selectList[i].txt?(console.log("bbb"),void t.showModal({title:"提示",content:"你还没有选择完整的所在地区信息哦~"})):(this.region=this.selectList[0].txt+this.selectList[1].txt+this.selectList[2].txt+"-",console.log(this.region),void(this.show=!1));else this.show=!1},change:function(e){1==e.show?t.hideTabBar():t.showTabBar()},tabEvent:function(t){this.indexTab=t,0==this.indexTab?(this.proviceShow=!0,this.cityShow=!1,this.areaShow=!1,this.checkTwo=null,this.checkThree=null,this.areaData=[],this.selectList[1].txt="请选择",this.selectList[2].txt="请选择"):1==this.indexTab?(this.proviceShow=!1,this.cityShow=!0,this.areaShow=!1,this.checkThree=null,this.selectList[2].txt="请选择"):2==this.indexTab&&(this.proviceShow=!1,this.cityShow=!1,this.areaShow=!0)},provinceEvent:function(t,e){this.checkOne=e,this.selectList[0].txt=t.name,this.indexTab=1,this.proviceShow=!1,this.cityShow=!0,this.areaShow=!1,this.cityData=t.cityList},cityEvent:function(t,e){this.checkTwo=e,this.selectList[1].txt=t.name,this.indexTab=2,this.proviceShow=!1,this.cityShow=!1,this.areaShow=!0,this.areaData=t.areaList},areaEvent:function(t,e){this.checkThree=e,this.selectList[2].txt=t.name}}};e.default=l}).call(this,i("543d")["default"])},"1c8f":function(t,e,i){"use strict";(function(t){i("d916");s(i("66fd"));var e=s(i("e342"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},2910:function(t,e,i){"use strict";var s,o=function(){var t=this,e=t.$createElement;t._self._c},n=[];i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return s}))},"404f":function(t,e,i){"use strict";i.r(e);var s=i("1109"),o=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,(function(){return s[t]}))}(n);e["default"]=o.a},a674:function(t,e,i){"use strict";var s=i("bb63"),o=i.n(s);o.a},bb63:function(t,e,i){},e342:function(t,e,i){"use strict";i.r(e);var s=i("2910"),o=i("404f");for(var n in o)"default"!==n&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("a674");var r,a=i("f0c5"),c=Object(a["a"])(o["default"],s["b"],s["c"],!1,null,"72e00c98",null,!1,s["a"],r);e["default"]=c.exports}},[["1c8f","common/runtime","common/vendor"]]]);